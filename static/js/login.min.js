function getFormValue(n){var t=$("#"+n),i=$.trim(t.val());return i===""&&t.addClass("error"),i}function setUser(n){n?sessionStorage.setItem("Known_User",JSON.stringify(n)):sessionStorage.removeItem("Known_User")}function checkMobile(){for(var r=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!1,n=0;n<t.length;n++)if(r.indexOf(t[n])>0){i=!0;break}return i}var baseUrl=$("base").attr("href"),baseApiUrl,isMobile;baseUrl=baseUrl.substring(0,baseUrl.length-1);baseApiUrl=baseUrl;isMobile=checkMobile();setUser(null);$("#ltLogin").html(Language.UserLogin);$("#ltScan").html(Language.ScanCode);$("#userName").attr("placeholder",Language.UserName);$("#password").attr("placeholder",Language.Password);$("#captcha").attr("placeholder",Language.Captcha);$("#imgCaptcha").attr("title",Language.RefreshCaptcha);$("#btnLogin").html(Language.Login);$("#TechSupport").html(Language.TechSupport);$(document).contextmenu(function(n){n.preventDefault()});$("input[onenter]").keydown(function(n){if((n.keyCode||n.which)===13){n.preventDefault();var t=$(this).attr("onenter");eval(t)}});$("#userName").focus();$("#imgCaptcha").click(function(){var n=$(this),t=n.attr("src").split("?")[0];n.attr("src",t+"?rnd="+Math.random())});$("#btnLogin").click(function(){var r,u;$(".form-item input").removeClass("error");var n=getFormValue("userName"),t=getFormValue("password"),i=getFormValue("captcha");n!==""&&t!==""&&i!==""&&(r=$(this).html(),u=$(this).attr("disabled",!0).html(Language.Logining),$.post(baseUrl+"/signin",{userName:n,password:t,captcha:i,isMobile:isMobile},function(n){u.removeAttr("disabled").html(r);n.ok?($("#message").html('<span style="color:#00f">'+n.message+"<\/span>"),setUser(n.data.Data),location=baseUrl+n.data.url):$("#message").html(n.message)}))});isMobile||$(".login-bell img").click(function(){var n=$(this).data("icon")||"1";n=n==="1"?"2":"1";$(this).data("icon",n).attr("src","static/img/login_icon"+n+".png");$(".form").hide();$("#login"+n).show()});