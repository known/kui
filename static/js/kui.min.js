function Admin(){function r(){var n,t;this.render=function(i){var r=$("<div>").addClass("layout-header").appendTo(i);n=$("<h1>").appendTo(r);t=$("<div>").appendTo(r);$("<div>").html("Logout").css({cursor:"pointer"}).appendTo(r).on("click",function(){app.logout()})};this.load=function(i){n.html(i.AppName);t.html("Welcome, "+i.UserName)}}function u(){this.render=function(n){var t=$("<div>").addClass("layout-side").appendTo(n)};this.load=function(){}}function f(){this.render=function(n){var t=$("<div>").addClass("layout-body").appendTo(n)}}var n=new r,t=new u,i=new f;this.render=function(r){r.addClass("dark");n.render(r);t.render(r);i.render(r)};this.mounted=function(){var i=this.user;n.load(i);t.load(i)}}function Button(n){function r(n){t.style&&n.addClass(t.style);t.icon&&$("<i>").addClass(t.icon).appendTo(n);$("<span>").html(t.text).appendTo(n);n.on("click",function(){var n=$(this).data("item"),t;n.handler&&(t={item:n,form:i.form},n.handler.call(this,t))})}var t=n||{},i=this;this.form=null;this.render=function(n){var i=$("<button>").data("item",t).appendTo(n);r(i)}}function Form(n){function u(n){i.style&&n.addClass(i.style);f(n);o(n)}function f(n){var t=i.columns,r;if(t&&t.length)for(r=0;r<t.length;r++)e(n,t[r])}function e(n,t){var i=$("<div>").addClass("form-item").appendTo(n),r=new Input(t),u;s(r);t.title?($("<label>").addClass("form-label").html(t.title).appendTo(i),u=$("<div>").addClass("form-input").appendTo(i),r.render(u)):t.icon?(i.addClass("icon"),$("<i>").addClass(t.icon).appendTo(i),r.render(i)):r.render(i)}function o(n){var t=i.buttons,u,f;if(t&&t.length)for(u=0;u<t.length;u++)f=new Button(t[u]),f.form=r,f.render(n)}function s(n){t.push(n);r[n.name]=n}var i=n||{},r=this,t=[];this.render=function(n){var t=$("<div>").addClass("form").appendTo(n);u(t)};this.validate=function(){for(var i,r=[],n=0;n<t.length;n++)i=t[n],i.validate()||r.push(i);return r.length===0};this.clear=function(){for(var i,n=0;n<t.length;n++)i=t[n],i.clearError(),i.setValue("")};this.getData=function(){for(var i,r={},n=0;n<t.length;n++)i=t[n],r[i.name]=i.getValue();return r}}function Input(n){function f(n){var r=t.type;if(r==="component"){t.component.render(n);return}i=r==="select"?$("<select>").appendTo(n):r==="textarea"?$("<textarea>").appendTo(n):$("<input>").attr("type",r).attr("autocomplete","off").appendTo(n);i.attr("name",u.name);t.placeholder&&i.attr("placeholder",t.placeholder);t.required&&i.attr("required",!0)}var t=n||{},r,i,u=this;this.name=t.field;this.render=function(n){r=n;f(n)};this.validate=function(){if(u.clearError(),t.type==="hidden")return!0;if(t.type==="component")return t.component.validate();var n=$.trim(u.getValue());return t.required&&n===""?(r.addClass("error"),!1):!0};this.clearError=function(){if(t.type==="component"){t.component.clearError();return}r.removeClass("error")};this.getValue=function(){var n=t.type,e=t.field,u,f;return n==="component"?t.component.getData():n==="radio"?r.find('input[name="'+e+'"]:checked').val()||"":n==="checkbox"?(u=r.find('input[name="'+e+'"]'),u.length===1?u[0].checked?1:0:(f=[],r.find('input[name="'+_name+'"]:checked').each(function(n,t){f.push($(t).val())}),f.join(","))):i.val()};this.setValue=function(){}}function Login(n){function i(n){if(n.form.validate()){var t=n.form.getData(),i={UserName:t.UserName};app.admin(i)}}var t=new Form({columns:[{field:"UserName",type:"text",icon:"fa fa-user",placeholder:Language.UserName,required:!0},{field:"Password",type:"password",icon:"fa fa-lock",placeholder:Language.Password,required:!0}],buttons:[{text:Language.Login,handler:i}]});this.render=function(i){var r=$("<div>").addClass("login").appendTo(i);$("<h1>").html(n.AppName).appendTo(r);$("<h2>").html(Language.UserLogin).appendTo(r);t.render(r)}}function Router(n,t){var r=t||{},u=n,i={},f=this;this.route=function(n){var f,t;r.before(n)&&(f=i.component,f&&f.destroy&&f.destroy(),n.previous||(n.previous=i),i=n,t=n.component,t&&(typeof t=="string"?u.html(t):(u.html(""),t.render(u)),setTimeout(function(){r.after&&r.after(n);t.mounted&&t.mounted()},10)))};this.back=function(){f.route(i.previous)}}function App(n,t){function i(n){n.component.user=h();s.route(n)}function r(){i({component:new Login(t)})}function f(){i({component:new Admin})}function h(){var i=sessionStorage.getItem(u),n;return!i||i==="undefined"?null:(n=JSON.parse(i),n.AppName||(n.AppName=t.AppName),n)}function e(n){n?sessionStorage.setItem(u,JSON.stringify(n)):sessionStorage.removeItem(u)}var o=$("#"+n),s=new Router(o,{before:function(n){var t=n.component;return!(t instanceof Login)&&!t.user?(r(),!1):!0},after:function(){}});this.config=t;this.route=function(n){i(n)};this.admin=function(n){e(n);f()};this.login=function(){r()};this.logout=function(){e(null);r()};const u="Known_User";f()}function log(n){console.log(n)}var app=new App("app",{AppName:"Known UI"});